/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/kpi/route";
exports.ids = ["app/api/kpi/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fkpi%2Froute&page=%2Fapi%2Fkpi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fkpi%2Froute.ts&appDir=%2FUsers%2Fkittisak%2FDesktop%2Fproject%2Fkpi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkittisak%2FDesktop%2Fproject%2Fkpi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fkpi%2Froute&page=%2Fapi%2Fkpi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fkpi%2Froute.ts&appDir=%2FUsers%2Fkittisak%2FDesktop%2Fproject%2Fkpi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkittisak%2FDesktop%2Fproject%2Fkpi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_kittisak_Desktop_project_kpi_app_api_kpi_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/kpi/route.ts */ \"(rsc)/./app/api/kpi/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/kpi/route\",\n        pathname: \"/api/kpi\",\n        filename: \"route\",\n        bundlePath: \"app/api/kpi/route\"\n    },\n    resolvedPagePath: \"/Users/kittisak/Desktop/project/kpi/app/api/kpi/route.ts\",\n    nextConfigOutput,\n    userland: _Users_kittisak_Desktop_project_kpi_app_api_kpi_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZrcGklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmtwaSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmtwaSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmtpdHRpc2FrJTJGRGVza3RvcCUyRnByb2plY3QlMkZrcGklMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGa2l0dGlzYWslMkZEZXNrdG9wJTJGcHJvamVjdCUyRmtwaSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDUTtBQUNyRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2tpdHRpc2FrL0Rlc2t0b3AvcHJvamVjdC9rcGkvYXBwL2FwaS9rcGkvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2twaS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2twaVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkva3BpL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2tpdHRpc2FrL0Rlc2t0b3AvcHJvamVjdC9rcGkvYXBwL2FwaS9rcGkvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fkpi%2Froute&page=%2Fapi%2Fkpi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fkpi%2Froute.ts&appDir=%2FUsers%2Fkittisak%2FDesktop%2Fproject%2Fkpi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkittisak%2FDesktop%2Fproject%2Fkpi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/kpi/route.ts":
/*!******************************!*\
  !*** ./app/api/kpi/route.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_auth_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth-utils */ \"(rsc)/./lib/auth-utils.ts\");\n\n\n\n// สร้าง KPI ใหม่\nasync function POST(request) {\n    try {\n        const session = await (0,_lib_auth_utils__WEBPACK_IMPORTED_MODULE_2__.getServerSession)();\n        console.log(\"POST /api/kpi - Session:\", session ? `User: ${session.user.username}` : \"No session\");\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"ไม่ได้รับอนุญาต\"\n            }, {\n                status: 401\n            });\n        }\n        // ตรวจสอบสิทธิ์การสร้าง KPI\n        if (session.user.role !== \"admin\" && session.user.role !== \"manager\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"ไม่มีสิทธิ์ในการสร้าง KPI\"\n            }, {\n                status: 403\n            });\n        }\n        const data = await request.json();\n        // ตรวจสอบข้อมูลที่จำเป็น\n        if (!data.title || !data.group || !data.dept) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"กรุณากรอกข้อมูลที่จำเป็น\"\n            }, {\n                status: 400\n            });\n        }\n        const conn = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.createConnection)();\n        try {\n            // เพิ่มข้อมูล KPI ใหม่\n            const [result] = await conn.execute(`INSERT INTO kpis (\n          \\`group\\`, plan, project, title, titleEn, detail, objective, \n          xfunction, var_a, var_b, icd_code, round, measure, goal, \n          alert, benchmark, method, ref, date_start, dept, \n          onwer1, onwer2, note, image, status, created_by\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, [\n                data.group,\n                data.plan || \"\",\n                data.project || \"\",\n                data.title,\n                data.titleEn || \"\",\n                data.detail || \"\",\n                data.objective || \"\",\n                data.xfunction || \"\",\n                data.var_a || \"\",\n                data.var_b || \"\",\n                data.icd_code || \"\",\n                data.round || \"\",\n                data.measure || \"\",\n                data.goal || \"\",\n                data.alert || \"\",\n                data.benchmark || \"\",\n                data.method || \"\",\n                data.ref || \"\",\n                data.date_start || new Date(),\n                data.dept,\n                data.onwer1 || session.user.id,\n                data.onwer2 || \"\",\n                data.note || \"\",\n                data.image || \"\",\n                \"pending\",\n                session.user.id\n            ]);\n            const insertResult = result;\n            if (data.objective && data.objective.length > 65535) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Objective too long\"\n                }, {\n                    status: 400\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                id: insertResult.insertId,\n                message: \"สร้าง KPI สำเร็จ\"\n            });\n        } finally{\n            await conn.end();\n        }\n    } catch (error) {\n        console.error(\"Create KPI error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"เกิดข้อผิดพลาดในการสร้าง KPI\"\n        }, {\n            status: 500\n        });\n    }\n}\n// ดึงรายการ KPI\nasync function GET(request) {\n    try {\n        const session = await (0,_lib_auth_utils__WEBPACK_IMPORTED_MODULE_2__.getServerSession)();\n        console.log(\"GET /api/kpi - Session:\", session ? `User: ${session.user.username}` : \"No session\");\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"ไม่ได้รับอนุญาต\"\n            }, {\n                status: 401\n            });\n        }\n        const searchParams = request.nextUrl.searchParams;\n        const page = Number.parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = Number.parseInt(searchParams.get(\"limit\") || \"10\");\n        const group = searchParams.get(\"group\");\n        const dept = searchParams.get(\"dept\");\n        console.log(\"GET /api/kpi - Params:\", {\n            page,\n            limit,\n            group,\n            dept\n        });\n        const offset = (page - 1) * limit;\n        const conn = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.createConnection)();\n        try {\n            // แก้ไขวิธีการดึงข้อมูล KPI โดยใช้วิธีที่ตรงไปตรงมามากขึ้น\n            let whereClause = \"WHERE 1=1\";\n            let countWhereClause = \"WHERE 1=1\";\n            if (group && group !== \"all\") {\n                whereClause += ` AND k.\\`group\\` = '${group}'`;\n                countWhereClause += ` AND \\`group\\` = '${group}'`;\n            }\n            if (dept && dept !== \"all\") {\n                whereClause += ` AND k.dept = '${dept}'`;\n                countWhereClause += ` AND dept = '${dept}'`;\n            }\n            if (session.user.role === \"user\") {\n                whereClause += ` AND (k.onwer1 = ${session.user.id} OR k.onwer2 = ${session.user.id})`;\n                countWhereClause += ` AND (onwer1 = ${session.user.id} OR onwer2 = ${session.user.id})`;\n            }\n            // ใช้ query แบบไม่มี placeholders\n            const query = `\n        SELECT k.*, u1.name as owner1_name, u2.name as owner2_name, d.name as dept_name\n        FROM kpis k\n        LEFT JOIN users u1 ON k.onwer1 = u1.id\n        LEFT JOIN users u2 ON k.onwer2 = u2.id\n        LEFT JOIN departments d ON k.dept = d.id\n        ${whereClause}\n        ORDER BY k.title ASC LIMIT ${limit} OFFSET ${offset}\n      `;\n            const countQuery = `\n        SELECT COUNT(*) as total\n        FROM kpis\n        ${countWhereClause}\n      `;\n            console.log(\"GET /api/kpi - Query:\", query);\n            // ดึงข้อมูล KPI\n            const [rows] = await conn.query(query);\n            // ดึงจำนวน KPI ทั้งหมด\n            const [countRows] = await conn.query(countQuery);\n            const total = countRows[0].total;\n            // ดึงรายการกลุ่ม KPI\n            const [groupRows] = await conn.query(\"SELECT DISTINCT `group` FROM kpis\");\n            // ดึงรายการแผนก\n            const [deptRows] = await conn.query(\"SELECT id, name FROM departments\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                kpis: rows,\n                total,\n                groups: groupRows,\n                departments: deptRows,\n                pagination: {\n                    page,\n                    limit,\n                    total,\n                    totalPages: Math.ceil(total / limit)\n                }\n            });\n        } finally{\n            await conn.end();\n        }\n    } catch (error) {\n        console.error(\"Get KPI list error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"เกิดข้อผิดพลาดในการดึงรายการ KPI\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUcsTUFBTWpELEtBQUsyQyxLQUFLLENBQUM7WUFFcEMsT0FBTzdELHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQ3ZCMEQsTUFBTUw7Z0JBQ05FO2dCQUNBSSxRQUFRSDtnQkFDUkksYUFBYUg7Z0JBQ2JJLFlBQVk7b0JBQ1ZsQjtvQkFDQUk7b0JBQ0FRO29CQUNBTyxZQUFZQyxLQUFLQyxJQUFJLENBQUNULFFBQVFSO2dCQUNoQztZQUNGO1FBQ0YsU0FBVTtZQUNSLE1BQU12QyxLQUFLK0IsR0FBRztRQUNoQjtJQUNGLEVBQUUsT0FBT3RDLE9BQU87UUFDZEwsUUFBUUssS0FBSyxDQUFDLHVCQUF1QkE7UUFDckMsT0FBT1gscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQW1DLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3hGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raXR0aXNhay9EZXNrdG9wL3Byb2plY3Qva3BpL2FwcC9hcGkva3BpL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBjcmVhdGVDb25uZWN0aW9uIH0gZnJvbSBcIkAvbGliL2RiXCJcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwiQC9saWIvYXV0aC11dGlsc1wiXG5cbi8vIOC4quC4o+C5ieC4suC4hyBLUEkg4LmD4Lir4Lih4LmIXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKClcblxuICAgIGNvbnNvbGUubG9nKFwiUE9TVCAvYXBpL2twaSAtIFNlc3Npb246XCIsIHNlc3Npb24gPyBgVXNlcjogJHtzZXNzaW9uLnVzZXIudXNlcm5hbWV9YCA6IFwiTm8gc2Vzc2lvblwiKVxuXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCLguYTguKHguYjguYTguJTguYnguKPguLHguJrguK3guJnguLjguI3guLLguJVcIiB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgLy8g4LiV4Lij4Lin4LiI4Liq4Lit4Lia4Liq4Li04LiX4LiY4Li04LmM4LiB4Liy4Lij4Liq4Lij4LmJ4Liy4LiHIEtQSVxuICAgIGlmIChzZXNzaW9uLnVzZXIucm9sZSAhPT0gXCJhZG1pblwiICYmIHNlc3Npb24udXNlci5yb2xlICE9PSBcIm1hbmFnZXJcIikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwi4LmE4Lih4LmI4Lih4Li14Liq4Li04LiX4LiY4Li04LmM4LmD4LiZ4LiB4Liy4Lij4Liq4Lij4LmJ4Liy4LiHIEtQSVwiIH0sIHsgc3RhdHVzOiA0MDMgfSlcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIC8vIOC4leC4o+C4p+C4iOC4quC4reC4muC4guC5ieC4reC4oeC4ueC4peC4l+C4teC5iOC4iOC4s+C5gOC4m+C5h+C4mVxuICAgIGlmICghZGF0YS50aXRsZSB8fCAhZGF0YS5ncm91cCB8fCAhZGF0YS5kZXB0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCLguIHguKPguLjguJPguLLguIHguKPguK3guIHguILguYnguK3guKHguLnguKXguJfguLXguYjguIjguLPguYDguJvguYfguJlcIiB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgY29uc3QgY29ubiA9IGF3YWl0IGNyZWF0ZUNvbm5lY3Rpb24oKVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOC5gOC4nuC4tOC5iOC4oeC4guC5ieC4reC4oeC4ueC4pSBLUEkg4LmD4Lir4Lih4LmIXG4gICAgICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IGNvbm4uZXhlY3V0ZShcbiAgICAgICAgYElOU0VSVCBJTlRPIGtwaXMgKFxuICAgICAgICAgIFxcYGdyb3VwXFxgLCBwbGFuLCBwcm9qZWN0LCB0aXRsZSwgdGl0bGVFbiwgZGV0YWlsLCBvYmplY3RpdmUsIFxuICAgICAgICAgIHhmdW5jdGlvbiwgdmFyX2EsIHZhcl9iLCBpY2RfY29kZSwgcm91bmQsIG1lYXN1cmUsIGdvYWwsIFxuICAgICAgICAgIGFsZXJ0LCBiZW5jaG1hcmssIG1ldGhvZCwgcmVmLCBkYXRlX3N0YXJ0LCBkZXB0LCBcbiAgICAgICAgICBvbndlcjEsIG9ud2VyMiwgbm90ZSwgaW1hZ2UsIHN0YXR1cywgY3JlYXRlZF9ieVxuICAgICAgICApIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylgLFxuICAgICAgICBbXG4gICAgICAgICAgZGF0YS5ncm91cCxcbiAgICAgICAgICBkYXRhLnBsYW4gfHwgXCJcIixcbiAgICAgICAgICBkYXRhLnByb2plY3QgfHwgXCJcIixcbiAgICAgICAgICBkYXRhLnRpdGxlLFxuICAgICAgICAgIGRhdGEudGl0bGVFbiB8fCBcIlwiLFxuICAgICAgICAgIGRhdGEuZGV0YWlsIHx8IFwiXCIsXG4gICAgICAgICAgZGF0YS5vYmplY3RpdmUgfHwgXCJcIixcbiAgICAgICAgICBkYXRhLnhmdW5jdGlvbiB8fCBcIlwiLFxuICAgICAgICAgIGRhdGEudmFyX2EgfHwgXCJcIixcbiAgICAgICAgICBkYXRhLnZhcl9iIHx8IFwiXCIsXG4gICAgICAgICAgZGF0YS5pY2RfY29kZSB8fCBcIlwiLFxuICAgICAgICAgIGRhdGEucm91bmQgfHwgXCJcIixcbiAgICAgICAgICBkYXRhLm1lYXN1cmUgfHwgXCJcIixcbiAgICAgICAgICBkYXRhLmdvYWwgfHwgXCJcIixcbiAgICAgICAgICBkYXRhLmFsZXJ0IHx8IFwiXCIsXG4gICAgICAgICAgZGF0YS5iZW5jaG1hcmsgfHwgXCJcIixcbiAgICAgICAgICBkYXRhLm1ldGhvZCB8fCBcIlwiLFxuICAgICAgICAgIGRhdGEucmVmIHx8IFwiXCIsXG4gICAgICAgICAgZGF0YS5kYXRlX3N0YXJ0IHx8IG5ldyBEYXRlKCksXG4gICAgICAgICAgZGF0YS5kZXB0LFxuICAgICAgICAgIGRhdGEub253ZXIxIHx8IHNlc3Npb24udXNlci5pZCxcbiAgICAgICAgICBkYXRhLm9ud2VyMiB8fCBcIlwiLFxuICAgICAgICAgIGRhdGEubm90ZSB8fCBcIlwiLFxuICAgICAgICAgIGRhdGEuaW1hZ2UgfHwgXCJcIixcbiAgICAgICAgICBcInBlbmRpbmdcIixcbiAgICAgICAgICBzZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgIF0sXG4gICAgICApXG5cbiAgICAgIGNvbnN0IGluc2VydFJlc3VsdCA9IHJlc3VsdCBhcyBhbnlcblxuICAgICAgaWYgKGRhdGEub2JqZWN0aXZlICYmIGRhdGEub2JqZWN0aXZlLmxlbmd0aCA+IDY1NTM1KSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk9iamVjdGl2ZSB0b28gbG9uZ1wiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgaWQ6IGluc2VydFJlc3VsdC5pbnNlcnRJZCxcbiAgICAgICAgbWVzc2FnZTogXCLguKrguKPguYnguLLguIcgS1BJIOC4quC4s+C5gOC4o+C5h+C4iFwiLFxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgYXdhaXQgY29ubi5lbmQoKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ3JlYXRlIEtQSSBlcnJvcjpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwi4LmA4LiB4Li04LiU4LiC4LmJ4Lit4Lic4Li04LiU4Lie4Lil4Liy4LiU4LmD4LiZ4LiB4Liy4Lij4Liq4Lij4LmJ4Liy4LiHIEtQSVwiIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG4vLyDguJTguLbguIfguKPguLLguKLguIHguLLguKMgS1BJXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oKVxuXG4gICAgY29uc29sZS5sb2coXCJHRVQgL2FwaS9rcGkgLSBTZXNzaW9uOlwiLCBzZXNzaW9uID8gYFVzZXI6ICR7c2Vzc2lvbi51c2VyLnVzZXJuYW1lfWAgOiBcIk5vIHNlc3Npb25cIilcblxuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwi4LmE4Lih4LmI4LmE4LiU4LmJ4Lij4Lix4Lia4Lit4LiZ4Li44LiN4Liy4LiVXCIgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cblxuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXNcbiAgICBjb25zdCBwYWdlID0gTnVtYmVyLnBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoXCJwYWdlXCIpIHx8IFwiMVwiKVxuICAgIGNvbnN0IGxpbWl0ID0gTnVtYmVyLnBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoXCJsaW1pdFwiKSB8fCBcIjEwXCIpXG4gICAgY29uc3QgZ3JvdXAgPSBzZWFyY2hQYXJhbXMuZ2V0KFwiZ3JvdXBcIilcbiAgICBjb25zdCBkZXB0ID0gc2VhcmNoUGFyYW1zLmdldChcImRlcHRcIilcblxuICAgIGNvbnNvbGUubG9nKFwiR0VUIC9hcGkva3BpIC0gUGFyYW1zOlwiLCB7IHBhZ2UsIGxpbWl0LCBncm91cCwgZGVwdCB9KVxuXG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2UgLSAxKSAqIGxpbWl0XG5cbiAgICBjb25zdCBjb25uID0gYXdhaXQgY3JlYXRlQ29ubmVjdGlvbigpXG5cbiAgICB0cnkge1xuICAgICAgLy8g4LmB4LiB4LmJ4LmE4LiC4Lin4Li04LiY4Li14LiB4Liy4Lij4LiU4Li24LiH4LiC4LmJ4Lit4Lih4Li54LilIEtQSSDguYLguJTguKLguYPguIrguYnguKfguLTguJjguLXguJfguLXguYjguJXguKPguIfguYTguJvguJXguKPguIfguKHguLLguKHguLLguIHguILguLbguYnguJlcbiAgICAgIGxldCB3aGVyZUNsYXVzZSA9IFwiV0hFUkUgMT0xXCJcbiAgICAgIGxldCBjb3VudFdoZXJlQ2xhdXNlID0gXCJXSEVSRSAxPTFcIlxuXG4gICAgICBpZiAoZ3JvdXAgJiYgZ3JvdXAgIT09IFwiYWxsXCIpIHtcbiAgICAgICAgd2hlcmVDbGF1c2UgKz0gYCBBTkQgay5cXGBncm91cFxcYCA9ICcke2dyb3VwfSdgXG4gICAgICAgIGNvdW50V2hlcmVDbGF1c2UgKz0gYCBBTkQgXFxgZ3JvdXBcXGAgPSAnJHtncm91cH0nYFxuICAgICAgfVxuXG4gICAgICBpZiAoZGVwdCAmJiBkZXB0ICE9PSBcImFsbFwiKSB7XG4gICAgICAgIHdoZXJlQ2xhdXNlICs9IGAgQU5EIGsuZGVwdCA9ICcke2RlcHR9J2BcbiAgICAgICAgY291bnRXaGVyZUNsYXVzZSArPSBgIEFORCBkZXB0ID0gJyR7ZGVwdH0nYFxuICAgICAgfVxuXG4gICAgICBpZiAoc2Vzc2lvbi51c2VyLnJvbGUgPT09IFwidXNlclwiKSB7XG4gICAgICAgIHdoZXJlQ2xhdXNlICs9IGAgQU5EIChrLm9ud2VyMSA9ICR7c2Vzc2lvbi51c2VyLmlkfSBPUiBrLm9ud2VyMiA9ICR7c2Vzc2lvbi51c2VyLmlkfSlgXG4gICAgICAgIGNvdW50V2hlcmVDbGF1c2UgKz0gYCBBTkQgKG9ud2VyMSA9ICR7c2Vzc2lvbi51c2VyLmlkfSBPUiBvbndlcjIgPSAke3Nlc3Npb24udXNlci5pZH0pYFxuICAgICAgfVxuXG4gICAgICAvLyDguYPguIrguYkgcXVlcnkg4LmB4Lia4Lia4LmE4Lih4LmI4Lih4Li1IHBsYWNlaG9sZGVyc1xuICAgICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgIFNFTEVDVCBrLiosIHUxLm5hbWUgYXMgb3duZXIxX25hbWUsIHUyLm5hbWUgYXMgb3duZXIyX25hbWUsIGQubmFtZSBhcyBkZXB0X25hbWVcbiAgICAgICAgRlJPTSBrcGlzIGtcbiAgICAgICAgTEVGVCBKT0lOIHVzZXJzIHUxIE9OIGsub253ZXIxID0gdTEuaWRcbiAgICAgICAgTEVGVCBKT0lOIHVzZXJzIHUyIE9OIGsub253ZXIyID0gdTIuaWRcbiAgICAgICAgTEVGVCBKT0lOIGRlcGFydG1lbnRzIGQgT04gay5kZXB0ID0gZC5pZFxuICAgICAgICAke3doZXJlQ2xhdXNlfVxuICAgICAgICBPUkRFUiBCWSBrLnRpdGxlIEFTQyBMSU1JVCAke2xpbWl0fSBPRkZTRVQgJHtvZmZzZXR9XG4gICAgICBgXG5cbiAgICAgIGNvbnN0IGNvdW50UXVlcnkgPSBgXG4gICAgICAgIFNFTEVDVCBDT1VOVCgqKSBhcyB0b3RhbFxuICAgICAgICBGUk9NIGtwaXNcbiAgICAgICAgJHtjb3VudFdoZXJlQ2xhdXNlfVxuICAgICAgYFxuXG4gICAgICBjb25zb2xlLmxvZyhcIkdFVCAvYXBpL2twaSAtIFF1ZXJ5OlwiLCBxdWVyeSlcblxuICAgICAgLy8g4LiU4Li24LiH4LiC4LmJ4Lit4Lih4Li54LilIEtQSVxuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubi5xdWVyeShxdWVyeSlcblxuICAgICAgLy8g4LiU4Li24LiH4LiI4Liz4LiZ4Lin4LiZIEtQSSDguJfguLHguYnguIfguKvguKHguJRcbiAgICAgIGNvbnN0IFtjb3VudFJvd3NdID0gYXdhaXQgY29ubi5xdWVyeShjb3VudFF1ZXJ5KVxuICAgICAgY29uc3QgdG90YWwgPSAoY291bnRSb3dzIGFzIGFueVtdKVswXS50b3RhbFxuXG4gICAgICAvLyDguJTguLbguIfguKPguLLguKLguIHguLLguKPguIHguKXguLjguYjguKEgS1BJXG4gICAgICBjb25zdCBbZ3JvdXBSb3dzXSA9IGF3YWl0IGNvbm4ucXVlcnkoXCJTRUxFQ1QgRElTVElOQ1QgYGdyb3VwYCBGUk9NIGtwaXNcIilcblxuICAgICAgLy8g4LiU4Li24LiH4Lij4Liy4Lii4LiB4Liy4Lij4LmB4Lic4LiZ4LiBXG4gICAgICBjb25zdCBbZGVwdFJvd3NdID0gYXdhaXQgY29ubi5xdWVyeShcIlNFTEVDVCBpZCwgbmFtZSBGUk9NIGRlcGFydG1lbnRzXCIpXG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGtwaXM6IHJvd3MsXG4gICAgICAgIHRvdGFsLFxuICAgICAgICBncm91cHM6IGdyb3VwUm93cyxcbiAgICAgICAgZGVwYXJ0bWVudHM6IGRlcHRSb3dzLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgcGFnZSxcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCksXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0gZmluYWxseSB7XG4gICAgICBhd2FpdCBjb25uLmVuZCgpXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJHZXQgS1BJIGxpc3QgZXJyb3I6XCIsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIuC5gOC4geC4tOC4lOC4guC5ieC4reC4nOC4tOC4lOC4nuC4peC4suC4lOC5g+C4meC4geC4suC4o+C4lOC4tuC4h+C4o+C4suC4ouC4geC4suC4oyBLUElcIiB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZUNvbm5lY3Rpb24iLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiUE9TVCIsInJlcXVlc3QiLCJzZXNzaW9uIiwiY29uc29sZSIsImxvZyIsInVzZXIiLCJ1c2VybmFtZSIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInJvbGUiLCJkYXRhIiwidGl0bGUiLCJncm91cCIsImRlcHQiLCJjb25uIiwicmVzdWx0IiwiZXhlY3V0ZSIsInBsYW4iLCJwcm9qZWN0IiwidGl0bGVFbiIsImRldGFpbCIsIm9iamVjdGl2ZSIsInhmdW5jdGlvbiIsInZhcl9hIiwidmFyX2IiLCJpY2RfY29kZSIsInJvdW5kIiwibWVhc3VyZSIsImdvYWwiLCJhbGVydCIsImJlbmNobWFyayIsIm1ldGhvZCIsInJlZiIsImRhdGVfc3RhcnQiLCJEYXRlIiwib253ZXIxIiwiaWQiLCJvbndlcjIiLCJub3RlIiwiaW1hZ2UiLCJpbnNlcnRSZXN1bHQiLCJsZW5ndGgiLCJzdWNjZXNzIiwiaW5zZXJ0SWQiLCJtZXNzYWdlIiwiZW5kIiwiR0VUIiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInBhZ2UiLCJOdW1iZXIiLCJwYXJzZUludCIsImdldCIsImxpbWl0Iiwib2Zmc2V0Iiwid2hlcmVDbGF1c2UiLCJjb3VudFdoZXJlQ2xhdXNlIiwicXVlcnkiLCJjb3VudFF1ZXJ5Iiwicm93cyIsImNvdW50Um93cyIsInRvdGFsIiwiZ3JvdXBSb3dzIiwiZGVwdFJvd3MiLCJrcGlzIiwiZ3JvdXBzIiwiZGVwYXJ0bWVudHMiLCJwYWdpbmF0aW9uIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/kpi/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth-utils.ts":
/*!***************************!*\
  !*** ./lib/auth-utils.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getServerSession: () => (/* binding */ getServerSession)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n\n\nasync function getServerSession() {\n    try {\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const token = await cookieStore.get(\"auth_token\");\n        if (!token) {\n            console.log(\"getServerSession: No auth_token cookie found\");\n            // ตรวจสอบ cookies ทั้งหมดที่มี\n            const allCookies = await cookieStore.getAll();\n            console.log(\"getServerSession: All cookies:\", allCookies.map((c)=>`${c.name}=${c.value.substring(0, 10)}...`));\n            return null;\n        }\n        console.log(\"getServerSession: Found auth_token cookie, verifying...\");\n        console.log(\"getServerSession: Token value length:\", token.value.length);\n        console.log(\"getServerSession: Token value preview:\", token.value.substring(0, 20) + \"...\");\n        try {\n            const jwtSecret = process.env.JWT_SECRET || \"your-secret-key\";\n            console.log(\"getServerSession: Using JWT_SECRET:\", jwtSecret.substring(0, 3) + \"...\" + jwtSecret.substring(jwtSecret.length - 3));\n            const verified = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__.verify)(token.value, jwtSecret);\n            console.log(\"getServerSession: Token verified successfully:\", {\n                id: verified.id,\n                username: verified.username,\n                role: verified.role\n            });\n            return {\n                user: {\n                    id: verified.id,\n                    username: verified.username,\n                    name: verified.name,\n                    role: verified.role\n                }\n            };\n        } catch (error) {\n            console.error(\"getServerSession: Token verification error:\", error);\n            return null;\n        }\n    } catch (error) {\n        console.error(\"getServerSession: Session error:\", error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC11dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNDO0FBQ0Q7QUFhOUIsZUFBZUU7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLGNBQWMsTUFBTUgscURBQU9BO1FBQ2pDLE1BQU1JLFFBQVEsTUFBTUQsWUFBWUUsR0FBRyxDQUFDO1FBRXBDLElBQUksQ0FBQ0QsT0FBTztZQUNWRSxRQUFRQyxHQUFHLENBQUM7WUFFWiwrQkFBK0I7WUFDL0IsTUFBTUMsYUFBYSxNQUFNTCxZQUFZTSxNQUFNO1lBQzNDSCxRQUFRQyxHQUFHLENBQ1Qsa0NBQ0FDLFdBQVdFLEdBQUcsQ0FBQyxDQUFDQyxJQUFNLEdBQUdBLEVBQUVDLElBQUksQ0FBQyxDQUFDLEVBQUVELEVBQUVFLEtBQUssQ0FBQ0MsU0FBUyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUM7WUFHbEUsT0FBTztRQUNUO1FBRUFSLFFBQVFDLEdBQUcsQ0FBQztRQUNaRCxRQUFRQyxHQUFHLENBQUMseUNBQXlDSCxNQUFNUyxLQUFLLENBQUNFLE1BQU07UUFDdkVULFFBQVFDLEdBQUcsQ0FBQywwQ0FBMENILE1BQU1TLEtBQUssQ0FBQ0MsU0FBUyxDQUFDLEdBQUcsTUFBTTtRQUVyRixJQUFJO1lBQ0YsTUFBTUUsWUFBWUMsUUFBUUMsR0FBRyxDQUFDQyxVQUFVLElBQUk7WUFDNUNiLFFBQVFDLEdBQUcsQ0FDVCx1Q0FDQVMsVUFBVUYsU0FBUyxDQUFDLEdBQUcsS0FBSyxRQUFRRSxVQUFVRixTQUFTLENBQUNFLFVBQVVELE1BQU0sR0FBRztZQUc3RSxNQUFNSyxXQUFXbkIsb0RBQU1BLENBQUNHLE1BQU1TLEtBQUssRUFBRUc7WUFFckNWLFFBQVFDLEdBQUcsQ0FBQyxrREFBa0Q7Z0JBQzVEYyxJQUFJRCxTQUFTQyxFQUFFO2dCQUNmQyxVQUFVRixTQUFTRSxRQUFRO2dCQUMzQkMsTUFBTUgsU0FBU0csSUFBSTtZQUNyQjtZQUVBLE9BQU87Z0JBQ0xDLE1BQU07b0JBQ0pILElBQUlELFNBQVNDLEVBQUU7b0JBQ2ZDLFVBQVVGLFNBQVNFLFFBQVE7b0JBQzNCVixNQUFNUSxTQUFTUixJQUFJO29CQUNuQlcsTUFBTUgsU0FBU0csSUFBSTtnQkFDckI7WUFDRjtRQUNGLEVBQUUsT0FBT0UsT0FBTztZQUNkbkIsUUFBUW1CLEtBQUssQ0FBQywrQ0FBK0NBO1lBQzdELE9BQU87UUFDVDtJQUNGLEVBQUUsT0FBT0EsT0FBTztRQUNkbkIsUUFBUW1CLEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMva2l0dGlzYWsvRGVza3RvcC9wcm9qZWN0L2twaS9saWIvYXV0aC11dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiXG5pbXBvcnQgeyB2ZXJpZnkgfSBmcm9tIFwianNvbndlYnRva2VuXCJcblxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IG51bWJlclxuICB1c2VybmFtZTogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICByb2xlOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uIHtcbiAgdXNlcjogVXNlclxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2Vzc2lvbigpOiBQcm9taXNlPFNlc3Npb24gfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKClcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGNvb2tpZVN0b3JlLmdldChcImF1dGhfdG9rZW5cIilcblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZ2V0U2VydmVyU2Vzc2lvbjogTm8gYXV0aF90b2tlbiBjb29raWUgZm91bmRcIilcblxuICAgICAgLy8g4LiV4Lij4Lin4LiI4Liq4Lit4LiaIGNvb2tpZXMg4LiX4Lix4LmJ4LiH4Lir4Lih4LiU4LiX4Li14LmI4Lih4Li1XG4gICAgICBjb25zdCBhbGxDb29raWVzID0gYXdhaXQgY29va2llU3RvcmUuZ2V0QWxsKClcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcImdldFNlcnZlclNlc3Npb246IEFsbCBjb29raWVzOlwiLFxuICAgICAgICBhbGxDb29raWVzLm1hcCgoYykgPT4gYCR7Yy5uYW1lfT0ke2MudmFsdWUuc3Vic3RyaW5nKDAsIDEwKX0uLi5gKSxcbiAgICAgIClcblxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcImdldFNlcnZlclNlc3Npb246IEZvdW5kIGF1dGhfdG9rZW4gY29va2llLCB2ZXJpZnlpbmcuLi5cIilcbiAgICBjb25zb2xlLmxvZyhcImdldFNlcnZlclNlc3Npb246IFRva2VuIHZhbHVlIGxlbmd0aDpcIiwgdG9rZW4udmFsdWUubGVuZ3RoKVxuICAgIGNvbnNvbGUubG9nKFwiZ2V0U2VydmVyU2Vzc2lvbjogVG9rZW4gdmFsdWUgcHJldmlldzpcIiwgdG9rZW4udmFsdWUuc3Vic3RyaW5nKDAsIDIwKSArIFwiLi4uXCIpXG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgand0U2VjcmV0ID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCBcInlvdXItc2VjcmV0LWtleVwiXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJnZXRTZXJ2ZXJTZXNzaW9uOiBVc2luZyBKV1RfU0VDUkVUOlwiLFxuICAgICAgICBqd3RTZWNyZXQuc3Vic3RyaW5nKDAsIDMpICsgXCIuLi5cIiArIGp3dFNlY3JldC5zdWJzdHJpbmcoand0U2VjcmV0Lmxlbmd0aCAtIDMpLFxuICAgICAgKVxuXG4gICAgICBjb25zdCB2ZXJpZmllZCA9IHZlcmlmeSh0b2tlbi52YWx1ZSwgand0U2VjcmV0KSBhcyBVc2VyXG5cbiAgICAgIGNvbnNvbGUubG9nKFwiZ2V0U2VydmVyU2Vzc2lvbjogVG9rZW4gdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5OlwiLCB7XG4gICAgICAgIGlkOiB2ZXJpZmllZC5pZCxcbiAgICAgICAgdXNlcm5hbWU6IHZlcmlmaWVkLnVzZXJuYW1lLFxuICAgICAgICByb2xlOiB2ZXJpZmllZC5yb2xlLFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiB2ZXJpZmllZC5pZCxcbiAgICAgICAgICB1c2VybmFtZTogdmVyaWZpZWQudXNlcm5hbWUsXG4gICAgICAgICAgbmFtZTogdmVyaWZpZWQubmFtZSxcbiAgICAgICAgICByb2xlOiB2ZXJpZmllZC5yb2xlLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiZ2V0U2VydmVyU2Vzc2lvbjogVG9rZW4gdmVyaWZpY2F0aW9uIGVycm9yOlwiLCBlcnJvcilcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJnZXRTZXJ2ZXJTZXNzaW9uOiBTZXNzaW9uIGVycm9yOlwiLCBlcnJvcilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJjb29raWVzIiwidmVyaWZ5IiwiZ2V0U2VydmVyU2Vzc2lvbiIsImNvb2tpZVN0b3JlIiwidG9rZW4iLCJnZXQiLCJjb25zb2xlIiwibG9nIiwiYWxsQ29va2llcyIsImdldEFsbCIsIm1hcCIsImMiLCJuYW1lIiwidmFsdWUiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJqd3RTZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsInZlcmlmaWVkIiwiaWQiLCJ1c2VybmFtZSIsInJvbGUiLCJ1c2VyIiwiZXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth-utils.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createConnection: () => (/* binding */ createConnection)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n\nasync function createConnection() {\n    // ใช้ environment variables แทนค่าที่กำหนดไว้ตายตัว\n    return await mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createConnection({\n        host: process.env.DB_HOST || \"192.168.100.221\",\n        user: process.env.DB_USER || \"kpi\",\n        password: process.env.DB_PASSWORD || \"kpikpi1\",\n        database: process.env.DB_NAME || \"kpi\",\n        port: Number.parseInt(process.env.DB_PORT || \"8889\")\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFFM0IsZUFBZUM7SUFDcEIsb0RBQW9EO0lBQ3BELE9BQU8sTUFBTUQsNERBQXNCLENBQUM7UUFDbENFLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsT0FBTyxJQUFJO1FBQzdCQyxNQUFNSCxRQUFRQyxHQUFHLENBQUNHLE9BQU8sSUFBSTtRQUM3QkMsVUFBVUwsUUFBUUMsR0FBRyxDQUFDSyxXQUFXLElBQUk7UUFDckNDLFVBQVVQLFFBQVFDLEdBQUcsQ0FBQ08sT0FBTyxJQUFJO1FBQ2pDQyxNQUFNQyxPQUFPQyxRQUFRLENBQUNYLFFBQVFDLEdBQUcsQ0FBQ1csT0FBTyxJQUFJO0lBQy9DO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raXR0aXNhay9EZXNrdG9wL3Byb2plY3Qva3BpL2xpYi9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsMi9wcm9taXNlXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNvbm5lY3Rpb24oKSB7XG4gIC8vIOC5g+C4iuC5iSBlbnZpcm9ubWVudCB2YXJpYWJsZXMg4LmB4LiX4LiZ4LiE4LmI4Liy4LiX4Li14LmI4LiB4Liz4Lir4LiZ4LiU4LmE4Lin4LmJ4LiV4Liy4Lii4LiV4Lix4LinXG4gIHJldHVybiBhd2FpdCBteXNxbC5jcmVhdGVDb25uZWN0aW9uKHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUIHx8IFwiMTkyLjE2OC4xMDAuMjIxXCIsXG4gICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCBcImtwaVwiLFxuICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCB8fCBcImtwaWtwaTFcIixcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcImtwaVwiLFxuICAgIHBvcnQ6IE51bWJlci5wYXJzZUludChwcm9jZXNzLmVudi5EQl9QT1JUIHx8IFwiODg4OVwiKSxcbiAgfSlcbn1cblxuIl0sIm5hbWVzIjpbIm15c3FsIiwiY3JlYXRlQ29ubmVjdGlvbiIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfTkFNRSIsInBvcnQiLCJOdW1iZXIiLCJwYXJzZUludCIsIkRCX1BPUlQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/mysql2","vendor-chunks/aws-ssl-profiles","vendor-chunks/iconv-lite","vendor-chunks/long","vendor-chunks/lru-cache","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/named-placeholders","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fkpi%2Froute&page=%2Fapi%2Fkpi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fkpi%2Froute.ts&appDir=%2FUsers%2Fkittisak%2FDesktop%2Fproject%2Fkpi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkittisak%2FDesktop%2Fproject%2Fkpi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();